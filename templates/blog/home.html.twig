{% extends 'base.html.twig' %}

{% block title %}
    {{ parent() }}
{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/home.css') }}">
{% endblock %}

{% block body %}

<div id="hero">
    <div id="hero-text">
        <h1 id="hero-title">SnowTricks</h1>
        <h2><em>La communaut√© qui partage sa passion</em></h2>
    </div>
    <a href="#list-tricks"><img id="btn-down" src="{{ asset('images/icones/down.png') }}" alt=""></a>
</div>

<section id="list-tricks" class="pt-5 pb-5">
    <div class="container-fluid">
        
        {% if app.user %}
            <div class="d-flex justify-content-center">
                <a class="mb-5" href="{{ path('trick_create') }}">
                    <button class="btn btn-secondary btn-lg ">Ajouter un Trick</button>
                </a>
            </div>        
        {% endif %}
    
        <div class="row justify-content-center">

        {% for trick in tricks %}
            <div class="card col-10 col-md-4 col-lg-2 ">
                <a href="{{ path('trick_show', {title: trick.title}) }}">
                {% if trick.mainImage != null %}
                    <img style="height: 200px; width: 100%; display: block;" src="{{ asset(trick.mainImage)}}" alt="Card image">
                {% elseif trick.images|length > 0 %}
                    <img style="height: 200px; width: 100%; display: block;" src="{{ asset(trick.images[0].name )}}" alt="Card image">
                {% else %}
                    <img style="height: 200px; width: 100%; display: block;" src="{{ asset('images/default-image.jpg')}}" alt="Card image">
                {% endif %}
                </a>
                <div class="card-body row">
                    <a class="w-75" href="{{ path('trick_show', {title: trick.title}) }}">
                        <h3>{{ trick.title | capitalize }}</h3>
                    </a>
                    <div class="w-25">
                    {% if app.user %}
                            <a href="{{ path('trick_update', {id: trick.id}) }}" class="card-link">
                                <img height="16px" src="{{ asset('images/icones/edit.png') }}" alt="">
                            </a>
                            <a href="{{ path('trick_delete', {id: trick.id}) }}" class="card-link">
                                <img height="18px" src="{{ asset('images/icones/delete.png') }}" alt="">
                            </a>
                    {% endif %}
                    </div>
                </div>
            </div>
        {% endfor %}
        </div>

        <div class="d-flex justify-content-center">
            <button type="button" id="load-more" class="btn btn-secondary btn-lg">Voir plus</button>
            <input type="hidden" id="offset" value="0">
            <input type="hidden" id="total" value="{{ totalTricks }}">
        </div>
    </div>

    <a href="#list-tricks"><img id="btn-up" src="{{ asset('images/icones/up.png') }}" alt=""></a>
</section>

{% endblock %}

{% block script %}
    <script src="{{ asset('js/home.js') }}"></script>
{% endblock %}